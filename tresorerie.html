<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√©sorerie & Recouvrement - AMT</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="logo.png">
</head>
<body>
    <header class="app-header">
        <img src="logo.png" alt="Logo" class="app-logo">
        <h1>Bilan de Tr√©sorerie & Recouvrement</h1>
    </header>

    <nav class="navigation">
        <a href="validation.html">Validation</a>
        <a href="stock.html">Stock</a>
        <a href="dashboard.html">Tableau de Bord</a>
        <a href="tresorerie.html" class="active">Tr√©sorerie</a>
        <a href="history.html">Historique</a>
        <a href="utilisateurs.html">Utilisateurs</a>
        <a href="recuperation.html">R√©cup√©ration</a>
        <button onclick="logout()" class="logout-button">D√©connexion</button>
    </nav>

    <div style="padding: 20px;">
        <div class="cash-grid">
            <div class="cash-card bg-income"><span class="cash-label">Recettes R√©elles (En caisse)</span><span id="totalRecettes" class="cash-amount">0,00 ‚Ç¨</span></div>
            <div class="cash-card bg-expense"><span class="cash-label">D√©penses (Achats Stock)</span><span id="totalDepenses" class="cash-amount">0,00 ‚Ç¨</span></div>
            <div class="cash-card bg-balance"><span class="cash-label">Solde Net Disponible</span><span id="soldeReel" class="cash-amount">0,00 ‚Ç¨</span></div>
            <div class="cash-card bg-waiting"><span class="cash-label">En attente Abidjan</span><span id="attenteAbidjan" class="cash-amount">0,00 ‚Ç¨</span></div>
            <div class="cash-card bg-waiting" style="background: #6366f1;"><span class="cash-label">Total CB</span><span id="kpiTotalCB" class="cash-amount">0,00 ‚Ç¨</span></div>
            <div class="cash-card bg-waiting" style="background: #8b5cf6;"><span class="cash-label">Total Virement</span><span id="kpiTotalVir" class="cash-amount">0,00 ‚Ç¨</span></div>
        </div>

        <div class="statement-container">
            <h2 style="font-size: 15px; margin-top:0;">Comptabilit√© Globale</h2>
            <div style="display: flex; flex-direction: column; gap: 10px; font-size: 13px;">
                <div style="display: flex; justify-content: space-between;"><span>CA Agence (Re√ßu)</span><span id="ca_agence_realise" style="color:#10b981; font-weight:bold;">0,00 ‚Ç¨</span></div>
                <div style="display: flex; justify-content: space-between;"><span>CA Abidjan (Re√ßu/R√©gl√©)</span><span id="ca_abidjan_regle" style="color:#10b981; font-weight:bold;">0,00 ‚Ç¨</span></div>
                <div style="display: flex; justify-content: space-between; font-weight: bold;"><span>TOTAL DISPONIBLE</span><span id="total_cash_brut">0,00 ‚Ç¨</span></div>
            </div>
        </div>

        <div class="statement-container">
            <h2 style="color: #701a75; font-size: 15px; margin-top:0;">üìç Recouvrement Abidjan (Attente de reversement)</h2>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th><th>Client / R√©f</th><th>Produit</th><th>Montant</th><th>Vendeur</th><th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="abidjanPendingBody"></tbody>
                </table>
            </div>
        </div>

        
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyCV8hR9MxIdpZDthtQpMbByZtNet1nIO-M", authDomain: "app-ventes-barriques.firebaseapp.com", projectId: "app-ventes-barriques", storageBucket: "app-ventes-barriques.appspot.com", messagingSenderId: "615546459847", appId: "1:615546459847:web:1b387b0b703b7a9a1210e2" };
        if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
        window.db = firebase.firestore();
    </script>
    <script src="auth-guard.js"></script>
    <script src="tresorerie.js"></script>
    <button id="btnBackToTop" onclick="scrollToTop()" style="display: none; position: fixed; bottom: 20px; right: 20px; z-index: 2000; background: #1877f2; color: white; border: none; border-radius: 50%; width: 45px; height: 45px; font-size: 20px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.3); align-items: center; justify-content: center;">
    ‚Üë
    </button>
</body>
</html>